<!doctype html><html lang=zh-tw dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="淺談遊戲漢化的技術手段"><meta name=keywords content="漢化,汉化,Game Translation,Reverse Engineering"><title>技術上，漢化遊戲有什麼方法？</title>
<link rel=canonical href=https://orangeegg1937.github.io/post/tech/game-translation-intro/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="技術上，漢化遊戲有什麼方法？"><meta property='og:description' content="淺談遊戲漢化的技術手段"><meta property='og:url' content='https://orangeegg1937.github.io/post/tech/game-translation-intro/'><meta property='og:site_name' content='Akua的IT狗Blog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='遊戲漢化'><meta property='article:tag' content='Game Translation'><meta property='article:tag' content='Reverse Engineering'><meta property='article:published_time' content='2025-05-11T00:20:05+08:00'><meta property='article:modified_time' content='2025-05-11T00:20:05+08:00'><meta property='og:image' content='https://orangeegg1937.github.io/post/tech/game-translation-intro/src/cover.png'><meta name=twitter:title content="技術上，漢化遊戲有什麼方法？"><meta name=twitter:description content="淺談遊戲漢化的技術手段"><meta name=twitter:card content="summary"><meta name=twitter:image content='https://orangeegg1937.github.io/post/tech/game-translation-intro/src/cover.png'><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-W1EQ120P1Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W1EQ120P1Y")}</script><meta name=google-site-verification content="QoDzDo-j5Rdi7yex9-U-B0UEHZATgt6rPZIpiX2CXSc"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"dark")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切換選單>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_ca2360778f344cc6.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🤗</span></figure><div class=site-meta><h1 class=site-name><a href=/>Akua的IT狗Blog</a></h1><h2 class=site-description>「早上是IT狗，到了晚上，就是加班的IT狗；」</h2></div></header><ol class=menu-social><li><a href=https://github.com/OrangeEgg1937 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://x.com/akuaaaaaaaaaaa1 target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about-me/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About me</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>夜晚模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目錄</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#前言>前言</a></li><li><a href=#人工輸入加直接用翻譯服務><del>人工輸入加直接用翻譯服務</del></a></li><li><a href=#ocr技術自動識別文字與翻譯>OCR技術自動識別文字與翻譯</a><ol><li><a href=#ocr翻譯工具>OCR翻譯工具</a><ol><li><a href=#google-translate-translate-images>Google Translate (Translate images)</a></li><li><a href=#mort>MORT</a></li></ol></li><li><a href=#缺點>缺點</a></li></ol></li><li><a href=#從記憶體掃描提取文字>從記憶體掃描提取文字</a><ol><li><a href=#簡單演示>簡單演示</a></li><li><a href=#tataruhelper>TataruHelper</a></li><li><a href=#缺點-1>缺點</a></li></ol></li><li><a href=#靜態修改---修改遊戲資源>靜態修改 - 修改遊戲資源</a><ol><li><a href=#簡單演示-1>簡單演示</a></li><li><a href=#缺點-2>缺點</a></li></ol></li><li><a href=#動態修改---hook>動態修改 - Hook</a><ol><li><a href=#簡單演示-待更新>簡單演示 (待更新)</a></li><li><a href=#bepinex--xunityautotranslator>BepInEx + XUnity.AutoTranslator</a></li><li><a href=#優點>優點</a></li><li><a href=#缺點-3>缺點</a></li></ol></li><li><a href=#總結>總結</a><ol><li><a href=#延伸>延伸</a></li></ol></li><li><a href=#後話>後話</a></li><li><a href=#參考資料>參考資料</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/tech/game-translation-intro/><img src=/post/tech/game-translation-intro/src/cover_hu_86e2c64006b5565e.png srcset="/post/tech/game-translation-intro/src/cover_hu_86e2c64006b5565e.png 800w, /post/tech/game-translation-intro/src/cover_hu_ff12eeb66d013f1f.png 1600w" width=800 height=440 loading=lazy alt="Featured image of post 技術上，漢化遊戲有什麼方法？"></a></div><div class=article-details><header class=article-category><a href=/categories/%E9%81%8A%E6%88%B2%E6%BC%A2%E5%8C%96/>遊戲漢化</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/tech/game-translation-intro/>技術上，漢化遊戲有什麼方法？</a></h2><h3 class=article-subtitle>淺談遊戲漢化的技術手段</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 11, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>閱讀時間: 16 分鐘</time></div></footer></div></header><section class=article-content><h2 id=前言>前言</h2><blockquote><p>作為資深玩家，當遇到沒有中文選項的遊戲時，第一反應往往是尋找漢化MOD。這些MOD的安裝方式各異，從簡單的下載安裝包到需要修改遊戲資源的複雜操作。使用過漢化的玩家都知道，有些漢化會在遊戲更新後失效(甚至需要移除)，但有些卻不受影響，這其中的差異是什麼原因造成的呢？</p><p>對於沒有漢化MOD的遊戲，且不懂遊戲語言的玩家，還有什麼方法可以理解遊戲內容呢？</p><p>⚠️文章內有較為簡單的遊戲解包，遊戲逆向的技術，這些技術是用來幫助我們理解遊戲的運作原理，以及漢化的手段。請勿用於不正當的用途，以及尊重知識產權。</p></blockquote><p>最近因為工作關係，需要設計一些遊戲翻譯服務，在設計的途中接觸到一些遊戲漢化手段，當中有些技術手段個人覺得值得一看，部分技術整合到自己設計的服務裏面。於是乎想寫一篇文章來介紹一下這些技術手段~</p><blockquote><p>⚠️翻譯質量問題本文章並不會詳細討論</p></blockquote><h2 id=人工輸入加直接用翻譯服務><del>人工輸入加直接用翻譯服務</del></h2><p>所謂反璞歸真，最簡單的方法就是直接使用網上翻譯服務，例如 <a class=link href=https://translate.google.com/ target=_blank rel=noopener>Google Translate</a>、<a class=link href=https://www.deepl.com/en/translator target=_blank rel=noopener>DeepL</a>等。優點是簡單，但是缺點是需要手動去輸入文本。不考慮翻譯質量，操作上也是很麻煩，需要不斷地切換遊戲和翻譯服務之間，影響遊玩體驗</p><p>而且還有一個關鍵問題是：</p><blockquote><p>既然都不會原語言，怎麼會懂得輸入文本呢？</p></blockquote><p><img src=/post/tech/game-translation-intro/src/example1.jpg width=1920 height=1080 srcset="/post/tech/game-translation-intro/src/example1_hu_9c8df8db763a2fda.jpg 480w, /post/tech/game-translation-intro/src/example1_hu_a929661461df60f.jpg 1024w" loading=lazy alt=想像一下，要將畫面中所有日文轉成中文是一件多麼苦惱的事情😲 class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>為了解決上述問題，在不修改遊戲的情況下，首先可以採用<a class=link href=https://zh.wikipedia.org/zh-tw/%E5%85%89%E5%AD%A6%E5%AD%97%E7%AC%A6%E8%AF%86%E5%88%AB target=_blank rel=noopener>OCR</a>技術來幫助我們進行翻譯~</p><hr><h2 id=ocr技術自動識別文字與翻譯>OCR技術自動識別文字與翻譯</h2><p>OCR技術(光學字符識別)通過截取遊戲畫面並識別其中的文字，再將識別結果傳送至翻譯服務，最後將翻譯結果以疊加或替換方式顯示在遊戲畫面上。這種方法不僅解決了"不懂輸入"的問題，同時實現了文字提取與翻譯的自動化流程，大幅提升了效率。</p><h3 id=ocr翻譯工具>OCR翻譯工具</h3><h4 id=google-translate-translate-images>Google Translate (Translate images)</h4><p>Google Translate 提供了一個非常方便的功能 &ndash; <a class=link href=https://support.google.com/translate/answer/6142483 target=_blank rel=noopener>Translate images</a>，可以直接將圖片中的文字翻譯成其他語言，這項技術的原理就是透過OCR識別文字，然后再翻譯成目標語言。</p><p>雖然在網頁版中，只提供了上傳圖片的功能，但在手機App中，則可以直接拍攝圖片甚至動態翻譯。（可以使用智能鏡頭無需拍照，然後它會自動幫你翻譯以及替換）</p><p><img src=/post/tech/game-translation-intro/src/ocr_google.jpg width=3385 height=2252 srcset="/post/tech/game-translation-intro/src/ocr_google_hu_ef82d8532591d1d7.jpg 480w, /post/tech/game-translation-intro/src/ocr_google_hu_31e02e7026e240b0.jpg 1024w" loading=lazy alt="Translate image 示範" class=gallery-image data-flex-grow=150 data-flex-basis=360px></p><p>Translate images的優點是簡單易用，無需安裝任何軟件，只需要將圖片上傳到Google Translate即可。不過，缺點是需要用另一個設備開著智能鏡頭，而且翻譯結果也不會顯示在遊戲中。感覺就像：</p><img src=src/genius.png alt=Genius width=50% height=50% style=display:block;margin:auto><figcaption style=font-size:1.4rem;color:var(--card-text-color-secondary);text-align:center>Genius.jpg</figcaption><p>話雖如此，這個功能當年在我玩 3DS 的時候還是非常好用的，當時的3DS很多遊戲并沒有中文化，那時候就靠著用iPad影住3DS幫我翻譯😂</p><h4 id=mort>MORT</h4><p>MORT 是一個免費open source的Windows OCR 翻譯工具，是一個在電腦上不錯的選擇，對比起上述的智能鏡頭，MORT無需鏡頭就可以從螢幕上攝取。我曾經早期在玩BLUE PROTOCOL使用了MORT一會（<del>之後因爲封鎖外國ＩＰ就沒有再用了</del>），能應付到大部分情況。</p><p>Project地址:　<a class=link href=https://github.com/killkimno/MORT target=_blank rel=noopener>https://github.com/killkimno/MORT</a></p><img src=src/MORT_windows.jpg alt="MORT Windows" width=50% height=50% style=display:block;margin:auto><p>MORT 支援多種翻譯服務，也可以自己implement翻譯API，以及自訂翻譯修正功能。它的使用方法也非常簡單，只需要設置 OCR 掃描區域，然後選擇翻譯服務即可。下面將簡單示範效果：</p><p><img src=/post/tech/game-translation-intro/src/MORT_area.jpg width=1919 height=1079 srcset="/post/tech/game-translation-intro/src/MORT_area_hu_eb4c29dfc54e928.jpg 480w, /post/tech/game-translation-intro/src/MORT_area_hu_ff4a5474d7f574a4.jpg 1024w" loading=lazy alt="我們需要在這裡設定 OCR 掃描Window" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p><img src=/post/tech/game-translation-intro/src/MORT_result.jpg width=1919 height=1079 srcset="/post/tech/game-translation-intro/src/MORT_result_hu_805dd2c155a22479.jpg 480w, /post/tech/game-translation-intro/src/MORT_result_hu_4de147a56d197833.jpg 1024w" loading=lazy alt=翻譯輸出會覆蓋掃瞄Window class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>在操作與速度上，MORT基本上可以做到即時翻譯。基本上解決了我們人工輸入的問題，並且可以自動化翻譯過程。當然，這個工具也有一些缺點，例如需要手動設置 OCR 掃描區域，如果遊戲的文字顯示位置不固定，那么都需要經常調整掃描位置。</p><h3 id=缺點>缺點</h3><p>整體來說，OCR技術是目前最簡單的遊戲翻譯方法之一，無需修改遊戲資源，也不需要任何編程知識，只需要安裝一個OCR翻譯工具即可。</p><p>不過，這個方法的有一些缺點，或者說是這個技術的困難：</p><ol><li><p>對於一些具有藝術風格的文字，會出現明顯識別錯誤的情況，例如下圖，MORT提取到的文字是"SHAD WBRINGERS"，而實際上是"SHADOWBRINGERS"
<img src=src/ocr_problem1.png alt="OCR Problem" width=80% height=50% style=display:block;margin:auto></p><figcaption style=font-size:1.4rem;color:var(--card-text-color-secondary);text-align:center>FFXIV Shadowbringers遊戲標題</figcaption></li><li><p>翻譯結果的顯示可能會影響遊戲的畫面顯示，或者會遮擋到遊戲，觀賞體驗會打折扣
<img src=src/ocr_problem2.png alt="OCR Problem" width=80% height=50% style=display:block;margin:auto></p><figcaption style=font-size:1.4rem;color:var(--card-text-color-secondary);text-align:center>翻譯結果溢出了遊戲視窗</figcaption></li><li><p>OCR技術的準確性取決於遊戲畫面的清晰度和文字的大小，如果畫面模糊/文字過小/遊戲畫面變化，則可能會導致識別錯誤</p></li></ol><p>基本上缺點２和３是技術上難以解決的，那麼就有沒有其他方法可以解決這些問題呢？</p><hr><h2 id=從記憶體掃描提取文字>從記憶體掃描提取文字</h2><p>遊戲運行時，文字內容通常會被加載到渲染對象(Render Object)的記憶體空間中，再透過渲染函數(如<code>draw()</code>)顯示在畫面上。</p><p>這些文字在記憶體中是以二進制的形式存儲的，這意味著我們可以通過掃描遊戲運行時的記憶體來提取這些文字。</p><h3 id=簡單演示>簡單演示</h3><p>假設我們現在有以下的遊戲畫面，然后我們想提取畫面中的文字 (畫面中的字每10秒改變一次)：</p><p><img src=/post/tech/game-translation-intro/src/m3_00.png width=1507 height=636 srcset="/post/tech/game-translation-intro/src/m3_00_hu_fbbe07fc9774a9cd.png 480w, /post/tech/game-translation-intro/src/m3_00_hu_9752a858b9cc4216.png 1024w" loading=lazy alt=Demo遊戲畫面 class=gallery-image data-flex-grow=236 data-flex-basis=568px></p><ol><li>使用一些工具來掃描遊戲的記憶體 (這裏會使用<a class=link href=https://github.com/cheat-engine/cheat-engine target=_blank rel=noopener>CheatEngine</a> )，首先我們直接從記憶體搜尋 <code>This is dialogue 7.</code> 。</li></ol><p><img src=/post/tech/game-translation-intro/src/m3_01.jpg width=1614 height=987 srcset="/post/tech/game-translation-intro/src/m3_01_hu_8ea1f40054ac4a13.jpg 480w, /post/tech/game-translation-intro/src/m3_01_hu_6b1c186a25f0360.jpg 1024w" loading=lazy alt=第一次掃描 class=gallery-image data-flex-grow=163 data-flex-basis=392px></p><blockquote><p>這裡由於C#的特性，字符串會被編碼成<a class=link href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/reference-types target=_blank rel=noopener>UTF-16</a>，這裡會選擇UTF-16</p></blockquote><ol start=2><li><p>接著我們會得到一個地址列表，這些開地址都是包含<code>This is dialogue 7.</code>的地址</p><p>最理想的情況下是第一次搜索然後裏面的內容會跟著畫面的字變動，這樣我們就可以知道這個地址是存放著畫面中的文字的地址。然而當畫面的文字出現變動的時候，我們會發現這個地址的內容並沒有變化</p><p>這意味著這個地址並不是存放著畫面中的文字的地址，而是這段文字的<strong>物件地址 (Object address)</strong></p></li></ol><p><img src=/post/tech/game-translation-intro/src/m3_03.jpg width=1009 height=805 srcset="/post/tech/game-translation-intro/src/m3_03_hu_9f893ca2f0cabf4c.jpg 480w, /post/tech/game-translation-intro/src/m3_03_hu_ccfd4c223424ea56.jpg 1024w" loading=lazy alt=附近的記憶體 class=gallery-image data-flex-grow=125 data-flex-basis=300px></p><ol start=3><li><p>透過分析這段文字附近的記憶體我們大概知道以下的訊息：</p><ul><li>這段記憶體附近存在其他的對話文本，然後這裏有重複出現的Magic Number <code>08 FC 4D 91 80 02 00 00</code> (圖片中黃色圈住的部分)</li><li>紅色部分是我們的對話文本，這裡是<code>This is dialogue 7.</code></li><li>然後文本前面存在一個 <code>14 00</code> 的數字，這個數字是這段文字的長度，20個字，這裏比原本的長度多了1個字元，觀察最後的<code>00 0D</code>，發現這個是<code>[U+000D]</code>，是<code>\r</code></li></ul><p>從這裡我們大概猜得出這個地址是對話文本的地址，也就是<code>String</code>，而前面Magic Number開始部分是<code>String</code>的Signature，然后4 bytes后面會跟文字的長度。</p><p>那么我們知道這段文字的對象地址 (Object address)，然後我們可以去搜尋<strong>誰指向這個地址 (who points to this address)</strong>，這樣我們就可以知道這段文字是被誰引用 (理所當然地就是<code>渲染的對象</code>)</p></li></ol><p><img src=/post/tech/game-translation-intro/src/m3_05.jpg width=1613 height=980 srcset="/post/tech/game-translation-intro/src/m3_05_hu_b92e7b5ec76b2053.jpg 480w, /post/tech/game-translation-intro/src/m3_05_hu_c3c8059b01307102.jpg 1024w" loading=lazy alt=搜尋Object地址 class=gallery-image data-flex-grow=164 data-flex-basis=395px></p><ol start=4><li>在畫面中再一次顯示<code>This is dialogue 7.</code>的時候進行搜尋，我們發現有2個位置會指向這個Object，稍微再等一等畫面改變</li></ol><p><img src=/post/tech/game-translation-intro/src/m3_06.jpg width=1610 height=981 srcset="/post/tech/game-translation-intro/src/m3_06_hu_b76cb652123b9ff6.jpg 480w, /post/tech/game-translation-intro/src/m3_06_hu_c5acf979f024c572.jpg 1024w" loading=lazy alt=搜尋Object地址 class=gallery-image data-flex-grow=164 data-flex-basis=393px></p><ol start=5><li>這時候我們會發現有一個位置的地址會跟著畫面中的文字變化，是另一段文字的地址，也即使是<code>This is dialogue 10.</code>的地址，跟著畫面中的文字相同，這意味著這個地址是存放著渲染畫面中的文字的地址。</li></ol><p>這意味著我們可以透過上述相同的方法，首先找到這個<code>渲染Object</code>的Signature，然后再找出儲存文字的偏移量(Offset)，獲取文字Object的地址，再透過文字Object獲取到文字以及文字的長度，然後將其翻譯成目標語言，最後將翻譯結果顯示在遊戲畫面上。整體過程大概是這樣：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>ExtractGameText</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 1. 搜索渲染Object
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span><span class=o>*</span> <span class=n>renderObj</span> <span class=o>=</span> <span class=n>FindRenderObject</span><span class=p>();</span> 
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 2. 透過渲染Object偏移取得文字Object
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span><span class=o>*</span> <span class=n>textObj</span> <span class=o>=</span> <span class=o>*</span><span class=p>(</span><span class=kt>void</span><span class=o>**</span><span class=p>)((</span><span class=n>uintptr_t</span><span class=p>)</span><span class=n>renderObj</span> <span class=o>+</span> <span class=n>TEXT_OBJECT_OFFSET</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=c1>// 3. 透過文字Object取得文字
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>short</span> <span class=n>textLen</span> <span class=o>=</span> <span class=o>*</span><span class=p>(</span><span class=kt>short</span><span class=o>*</span><span class=p>)((</span><span class=n>uintptr_t</span><span class=p>)</span><span class=n>textObj</span> <span class=o>+</span> <span class=mh>0x4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>gameText</span> <span class=o>=</span> <span class=n>ReadGameMemory</span><span class=p>((</span><span class=kt>void</span><span class=o>*</span><span class=p>)((</span><span class=n>uintptr_t</span><span class=p>)</span><span class=n>textObj</span> <span class=o>+</span> <span class=mh>0x6</span><span class=p>),</span> <span class=n>textLen</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>gameText</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>可能會有人問，為什麼不順便從渲染Object修改文字呢？因為通常直接修改文字都很大機會沒有即時反應或者會出現崩潰，有些渲染Object通常為了optimize渲染流程，通常都不會故意每一frame去重複，通常會有一個變量variable (例如 <code>isDirty</code>)控制、又或者一些變數權限問題、caching mechanism等等，從而導致修改失效。</p><p>不過在這個方法下，是可以直接從遊戲中提取文字，不會受到畫面清晰度和文字大小的影響。</p><h3 id=tataruhelper>TataruHelper</h3><p>TataruHelper 是一個用於 Final Fantasy XIV 的翻譯工具，通過<a class=link href=https://github.com/FFXIVAPP/sharlayan target=_blank rel=noopener>Sharlayan工具</a>獲取到遊戲劇情的文字，然後將其翻譯成目標語言。</p><p>Project地址:　<a class=link href=https://github.com/NightlyRevenger/TataruHelper target=_blank rel=noopener>https://github.com/NightlyRevenger/TataruHelper</a></p><p>然後通過對TataruHelper-Sharlayan工具簡單的分析，可以看見其中他的<a class=link href=https://github.com/NightlyRevenger/TataruHelper/blob/8141501284c5bdc102c331ed863f79d08e87d24e/Sharlayan/Reader.ChatLog.cs#L52 target=_blank rel=noopener>Reader.ChatLog.cs</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>ChatLogResult</span> <span class=n>GetChatLog</span><span class=p>(</span><span class=kt>int</span> <span class=n>previousArrayIndex</span> <span class=p>=</span> <span class=m>0</span><span class=p>,</span> <span class=kt>int</span> <span class=n>previousOffset</span> <span class=p>=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>Signature</span> <span class=n>ChatLogKey</span> <span class=p>=</span> <span class=n>Scanner</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Locations</span><span class=p>[</span><span class=n>Signatures</span><span class=p>.</span><span class=n>ChatLogKey</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>chatPointerMap</span> <span class=p>=</span> <span class=p>(</span><span class=n>IntPtr</span><span class=p>)</span><span class=n>Scanner</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Locations</span><span class=p>[</span><span class=n>Signatures</span><span class=p>.</span><span class=n>ChatLogKey</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>chatPointerMap</span><span class=p>.</span><span class=n>ToInt64</span><span class=p>()</span> <span class=p>&lt;=</span> <span class=m>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=p>&lt;</span><span class=n>List</span><span class=p>&lt;</span><span class=kt>byte</span><span class=p>&gt;&gt;</span> <span class=n>buffered</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>List</span><span class=p>&lt;</span><span class=kt>byte</span><span class=p>&gt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>try</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>LineCount</span> <span class=p>=</span> <span class=p>(</span><span class=kt>uint</span><span class=p>)</span><span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>ChatLogReader</span><span class=p>.</span><span class=n>Indexes</span><span class=p>.</span><span class=n>Clear</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>ChatLogReader</span><span class=p>.</span><span class=n>ChatLogPointers</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ChatLogPointers</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>LineCount</span> <span class=p>=</span> <span class=p>(</span><span class=kt>uint</span><span class=p>)</span><span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>OffsetArrayStart</span> <span class=p>=</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>,</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Structures</span><span class=p>.</span><span class=n>ChatLogPointers</span><span class=p>.</span><span class=n>OffsetArrayStart</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>OffsetArrayPos</span> <span class=p>=</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>,</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Structures</span><span class=p>.</span><span class=n>ChatLogPointers</span><span class=p>.</span><span class=n>OffsetArrayPos</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>OffsetArrayEnd</span> <span class=p>=</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>,</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Structures</span><span class=p>.</span><span class=n>ChatLogPointers</span><span class=p>.</span><span class=n>OffsetArrayEnd</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>LogStart</span> <span class=p>=</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>,</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Structures</span><span class=p>.</span><span class=n>ChatLogPointers</span><span class=p>.</span><span class=n>LogStart</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>LogNext</span> <span class=p>=</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>,</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Structures</span><span class=p>.</span><span class=n>ChatLogPointers</span><span class=p>.</span><span class=n>LogNext</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>LogEnd</span> <span class=p>=</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>GetPlatformUInt</span><span class=p>(</span><span class=n>chatPointerMap</span><span class=p>,</span> <span class=n>MemoryHandler</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Structures</span><span class=p>.</span><span class=n>ChatLogPointers</span><span class=p>.</span><span class=n>LogEnd</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>就是透過<code>ChatLogKey</code>這個Signature來獲取到遊戲的對話文本對象 (<code>Line 4</code>)，然後再提取其相關信息 (<code>Line 20</code>)。</p><p>然後到翻譯工具本體，可以看見其中<a class=link href=https://github.com/NightlyRevenger/TataruHelper/blob/8141501284c5bdc102c331ed863f79d08e87d24e/FFXIVWpfApp1/FFHandlers/FFMemoryReader.cs#L327 target=_blank rel=noopener>FFMemoryReader.cs</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>private</span> <span class=kd>async</span> <span class=n>Task</span> <span class=n>ChatReader</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>_previousArrayIndex</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>_previousOffset</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ChatLogResult</span> <span class=n>previousPanelResults</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ChatLogResult</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>_KeepWorking</span> <span class=p>&amp;&amp;</span> <span class=n>_KeepReading</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>ChatLogResult</span> <span class=n>readResult</span> <span class=p>=</span> <span class=n>Reader</span><span class=p>.</span><span class=n>GetChatLog</span><span class=p>(</span><span class=n>_previousArrayIndex</span><span class=p>,</span> <span class=n>_previousOffset</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>_previousArrayIndex</span> <span class=p>=</span> <span class=n>readResult</span><span class=p>.</span><span class=n>PreviousArrayIndex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>_previousOffset</span> <span class=p>=</span> <span class=n>readResult</span><span class=p>.</span><span class=n>PreviousOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>_UseDirectReadingInternal</span> <span class=p>&amp;&amp;</span> <span class=n>_UseDirectReading</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>var</span> <span class=n>directDialog</span> <span class=p>=</span> <span class=n>Reader</span><span class=p>.</span><span class=n>GetDirectDialog</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=n>readResult</span><span class=p>.</span><span class=n>ChatLogItems</span><span class=p>.</span><span class=n>AddRange</span><span class=p>(</span><span class=n>directDialog</span><span class=p>.</span><span class=n>ChatLogItems</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>ClearMessagesList</span><span class=p>(</span><span class=n>readResult</span><span class=p>,</span> <span class=n>previousPanelResults</span><span class=p>,</span> <span class=n>directDialog</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>chatLogEntries</span> <span class=p>=</span> <span class=n>readResult</span><span class=p>.</span><span class=n>ChatLogItems</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>readResult</span><span class=p>.</span><span class=n>ChatLogItems</span><span class=p>.</span><span class=n>Count</span> <span class=p>&gt;</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>readResult</span><span class=p>.</span><span class=n>ChatLogItems</span><span class=p>.</span><span class=n>Count</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>ProcessChatMsg</span><span class=p>(</span><span class=n>readResult</span><span class=p>.</span><span class=n>ChatLogItems</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Logger</span><span class=p>.</span><span class=n>WriteLog</span><span class=p>(</span><span class=n>Convert</span><span class=p>.</span><span class=n>ToString</span><span class=p>(</span><span class=n>e</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>Task</span><span class=p>.</span><span class=n>Delay</span><span class=p>(</span><span class=n>GlobalSettings</span><span class=p>.</span><span class=n>MemoryReaderDelay</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=k>void</span> <span class=n>ProcessChatMsg</span><span class=p>(</span><span class=n>ChatLogItem</span> <span class=n>chatLogItem</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>tmpMsg</span> <span class=p>=</span> <span class=k>new</span> <span class=n>FFChatMsg</span><span class=p>(</span><span class=n>chatLogItem</span><span class=p>.</span><span class=n>Line</span><span class=p>,</span> <span class=n>chatLogItem</span><span class=p>.</span><span class=n>Code</span><span class=p>,</span> <span class=n>chatLogItem</span><span class=p>.</span><span class=n>TimeStamp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>_FFxivChat</span><span class=p>.</span><span class=n>Enqueue</span><span class=p>(</span><span class=n>tmpMsg</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>然后下層則負責透過<code>ChatLogResult</code>處理對象，提取文字交給<code>ProcessChatMsg</code>負責，最後交給翻譯相關的API進行翻譯，然後將翻譯結果顯示在遊戲畫面上。
這樣就可以實現即時翻譯的效果，並且不會受到畫面清晰度和文字大小的影響。</p><p><img src=/post/tech/game-translation-intro/src/tataru_helper.jpg width=1726 height=955 srcset="/post/tech/game-translation-intro/src/tataru_helper_hu_41f6ae7973fdb74a.jpg 480w, /post/tech/game-translation-intro/src/tataru_helper_hu_a7af0dcac99fd220.jpg 1024w" loading=lazy alt=官方示範的TataruHelper效果 class=gallery-image data-flex-grow=180 data-flex-basis=433px></p><h3 id=缺點-1>缺點</h3><p>在不考慮技術門檻的情況下，這個方法的唯一缺點就是它的翻譯結果的呈現方式缺少沉澱感，翻譯結果並不是顯示在原本的位置。那么有沒有方法可以直接修改遊戲顯示的文字呢？</p><h2 id=靜態修改---修改遊戲資源>靜態修改 - 修改遊戲資源</h2><p>正常情況下遊戲資源都會分別儲存在一個<code>資源文件夾 (Assets)</code>裡面(例如Resoruces, AssetBundle)以方便管理，然后遊戲運行時對資源目錄讀取，例如角色的對話會儲存在TextAssets</p><blockquote><p>想像一下如果角色的對話編寫再代碼裏面，如果要進行更改那麼是一件非常麻煩的事</p></blockquote><p>靜態修改是指直接再遊戲運行前，修改遊戲資源文件中的文字，有安裝過漢化MOD的經驗的話相信對這個方法並不陌生，有些MOD就是直接覆蓋遊戲的部分檔案，原理就是把已經翻譯好的資源包 (Assets) 直接覆蓋進遊戲的資源位置，然後遊戲運行時就會直接使用這些已修改的資源(漢化后的文字)。</p><p>雖然表面表面上看就只是覆蓋資源文件，但其實這個方法的最困難的地方是如何找到<code>資源文件夾 (Assets)</code>、從中提取文字以及再一次封包，一般遊戲為了防止遭到修改和解包，以及optimize遊戲運行時的速度，遊戲的資源已經被打包成專用格式。</p><h3 id=簡單演示-1>簡單演示</h3><p><img src=/post/tech/game-translation-intro/src/m4_00.png width=1216 height=612 srcset="/post/tech/game-translation-intro/src/m4_00_hu_d7db43670faf9926.png 480w, /post/tech/game-translation-intro/src/m4_00_hu_2305ef374d552d5b.png 1024w" loading=lazy alt=Demo遊戲畫面 class=gallery-image data-flex-grow=198 data-flex-basis=476px></p><p>就以我們上一個例子的Demo示範，假設我們有以下的TextAssets (在Resources/dialogue)，而這些TextAssets就是畫面中的文字：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>    &#34;Hello&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 1.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 2.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 3.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 4.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 5.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 6.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 7.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 8.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 9.&#34;
</span></span><span class=line><span class=cl>    &#34;This is dialogue 10.&#34;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><ol><li>首先我們需要找到遊戲的位置</li></ol><p><img src=/post/tech/game-translation-intro/src/m4_01.png width=695 height=231 srcset="/post/tech/game-translation-intro/src/m4_01_hu_61752cb6260ef21b.png 480w, /post/tech/game-translation-intro/src/m4_01_hu_5010122d2225ec38.png 1024w" loading=lazy alt=遊戲目錄 class=gallery-image data-flex-grow=300 data-flex-basis=722px></p><ol start=2><li>觀察他的<code>Data</code>的資料夾，這個resources.assets就是我們的目標，當然無法直接打開</li></ol><p><img src=/post/tech/game-translation-intro/src/m4_02.png width=774 height=440 srcset="/post/tech/game-translation-intro/src/m4_02_hu_fd2615f1a419470b.png 480w, /post/tech/game-translation-intro/src/m4_02_hu_beba6349615b2abe.png 1024w" loading=lazy alt=遊戲Data目錄 class=gallery-image data-flex-grow=175 data-flex-basis=422px></p><ol start=3><li>這時候我們需要使用一些工具來解包這個資源包，這裡會使用<a class=link href=https://github.com/SeriousCache/UABE target=_blank rel=noopener>UABE</a></li></ol><p><img src=/post/tech/game-translation-intro/src/m4_03.png width=1347 height=839 srcset="/post/tech/game-translation-intro/src/m4_03_hu_e052f893241fb909.png 480w, /post/tech/game-translation-intro/src/m4_03_hu_1e0d8a5aa5dd1aa1.png 1024w" loading=lazy alt=解包後的結果 class=gallery-image data-flex-grow=160 data-flex-basis=385px></p><ol start=4><li>然後我們可以在UABE中找到我們的TextAssets，然后對其進行修改，對其進行修改然后保存，然後再將其封包回去</li></ol><p><img src=/post/tech/game-translation-intro/src/m4_04.jpg width=724 height=524 srcset="/post/tech/game-translation-intro/src/m4_04_hu_59e4a3162d00b2d3.jpg 480w, /post/tech/game-translation-intro/src/m4_04_hu_903f2a64732009cf.jpg 1024w" loading=lazy alt=用UABE進行修改以及再一次封包 class=gallery-image data-flex-grow=138 data-flex-basis=331px></p><ol start=5><li>最後我們就可以看到修改后的結果了</li></ol><p><img src=/post/tech/game-translation-intro/src/m4_05.png width=1219 height=630 srcset="/post/tech/game-translation-intro/src/m4_05_hu_f7f8ae37a1abcbb8.png 480w, /post/tech/game-translation-intro/src/m4_05_hu_fd96885cc0fa0b02.png 1024w" loading=lazy alt=修改后的結果 class=gallery-image data-flex-grow=193 data-flex-basis=464px></p><blockquote><p>⚠️正常情況下這裡的中文字會無法顯示，這裡為了示範已經預先把中文文字字型包打進來了遊戲裏面，後面會連同動態修改的部分一起說明這些方法的一些潛在問題</p></blockquote><h3 id=缺點-2>缺點</h3><p>靜態修改的方法基本上解決了上述缺少沉澱感的缺點，但同帶來了一些潛在的問題</p><ol><li><p>技術含量門檻較高‌：對遊戲的資源包進行解包和封包，需要一些專業的工具和知識。顯示的Demo的是一個Unity的遊戲，因為已經有前人的工具可以使用，所以過程看起來比較簡單。但如果是其他引擎的遊戲，則需要自己去找工具或者自己寫工具來解包和封包。</p></li><li><p><strong>潛在的法律風險‌：不正當使用的情況下對遊戲進行解包是有機會侵犯遊戲的智慧財產權，當然如果取得遊戲官方的授權的話就沒有這方面的考量。</strong></p></li><li><p>‌潛在穩定性風險‌：修改遊戲檔案可能導致程式崩潰或資料遺失，需備份原始檔案。(也是為什麼有些漢化模組會特登強調備份遊戲檔案的原因)</p></li><li><p>模組的有效性‌風險‌：使用靜態修改漢化後，如果遊戲出現更新可能會導致修改的資源文件失效，因為原本的修改的資源包被更新成官方新版本的資源包，這樣舊的資源包就會被覆蓋掉從而失效。(也是為什麼有些漢化模組有時候會著遊戲更新後失效)</p></li><li><p>額外的延伸問題需要處理，詳情請見 <code>7.1: 延伸</code></p></li></ol><h2 id=動態修改---hook>動態修改 - Hook</h2><p>動態修改是指在遊戲運行的時候，通過一些技術手段來修改遊戲的文件中的文字。這個方法的原理是通過<code>Hook</code>技術來攔截遊戲的渲染函數或者文字相關的函數，然後在渲染之前將文字進行翻譯。</p><p><img src=/post/tech/game-translation-intro/src/m5_00.png width=1068 height=731 srcset="/post/tech/game-translation-intro/src/m5_00_hu_9c9c9f126569aaca.png 480w, /post/tech/game-translation-intro/src/m5_00_hu_6c6f67392ebd3ece.png 1024w" loading=lazy alt=Hook理念 class=gallery-image data-flex-grow=146 data-flex-basis=350px></p><p>手法上跟上面的<code>從記憶體掃描出文字位址</code>類似，但這個方法的核心不是去找<code>Object</code>的Signature，而是去找<code>函數 (Function)</code>。透過找到的相關函數，然後將其Hook，從中攔截<code>函數的參數(Function parameters)</code>，進行翻譯以及返回翻譯結果，然后再還原去原本的函數 (Function)。</p><p>雖然如此，這個方法的技術含量會比靜態修改高很多，因為Hook技術本身就需要一些底層的知識，一般而言通常都會使用到inline hook，如果對這個技術的原理以及實現有興趣，我建議可以觀看以下文章:</p><ul><li><a class=link href=https://www.malwaretech.com/2015/01/inline-hooking-for-programmers-part-1.html target=_blank rel=noopener>Inline Hooking for Programmers (Part 1: Introduction)</a></li><li><a class=link href=https://www.sunmoonblog.com/2019/07/15/inline-hook-basic/ target=_blank rel=noopener>Android inline hook 浅析</a></li></ul><p>(如果有機會可能我都會自己實現一次，目前我都係直接使用別人已經寫好的Library)</p><h3 id=簡單演示-待更新>簡單演示 (待更新)</h3><p>(這部分網上已經有很多Desktop方面，暫時不提供示範，之後會開一篇文章講述如何對手機unity APK進行Hook漢化)</p><h3 id=bepinex--xunityautotranslator>BepInEx + XUnity.AutoTranslator</h3><p>這裡將會介紹其中一個Unity遊戲常見的工具，BepInEx以及XUnity.AutoTranslator</p><p>BepInEx是一個開源的Unity遊戲模組框架，支持多種遊戲引擎，並且提供了許多API來幫助開發者進行遊戲模組的開發，BepInEx其中就有提供Unity方面的Hook API。</p><p>XUnity.AutoTranslator則是一個基於BepInEx的翻譯模組，可以自動將遊戲中的文字翻譯成目標語言。</p><ul><li><a class=link href=https://github.com/BepInEx/BepInEx target=_blank rel=noopener>BepInEx</a></li><li><a class=link href=https://github.com/bbepis/XUnity.AutoTranslator target=_blank rel=noopener>XUnity.AutoTranslator</a></li></ul><p>然後通過對XUnity.AutoTranslator的Hook Folder分析，可以看見其中對各種unity文字類別進行了Hook，例如<code>TextMeshPro</code>、<code>NGUI</code>、<code>UGUI</code>等等，我們可以直接看<code>TextMeshProHooks.cs</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>internal</span> <span class=kd>static</span> <span class=k>class</span> <span class=nc>TextWindow_SetText_Hook</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl>   <span class=kd>static</span> <span class=n>MethodBase</span> <span class=n>TargetMethod</span><span class=p>(</span><span class=kt>object</span> <span class=n>instance</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>AccessToolsShim</span><span class=p>.</span><span class=n>Method</span><span class=p>(</span><span class=n>UnityTypes</span><span class=p>.</span><span class=n>TextWindow</span><span class=p>.</span><span class=n>ClrType</span><span class=p>,</span> <span class=s>&#34;SetText&#34;</span><span class=p>,</span> <span class=k>new</span> <span class=n>Type</span><span class=p>[]</span> <span class=p>{</span> <span class=k>typeof</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// TextGetterCompatHooks.cs</span>
</span></span><span class=line><span class=cl><span class=kd>internal</span> <span class=kd>static</span> <span class=k>class</span> <span class=nc>Text_text_Hook</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=k>void</span> <span class=n>Postfix</span><span class=p>(</span><span class=kt>object</span> <span class=n>__instance</span><span class=p>,</span> <span class=k>ref</span> <span class=kt>string</span> <span class=n>__result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>TextGetterCompatModeHelper</span><span class=p>.</span><span class=n>ReplaceTextWithOriginal</span><span class=p>(</span><span class=n>__instance</span><span class=p>,</span> <span class=k>ref</span> <span class=n>__result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>TMP是Unity的其中之一的文字渲染系統，在正常的Unity C# Code，如果要更改顯示的字就會呼叫 <code>SetText()</code>，從中看見XUnity.AutoTranslator會對其進行Hook，從而獲取文字，然后使用<code>ReplaceTextWithOriginal</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=na>[MethodImpl(MethodImplOptions.NoInlining)]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>ReplaceTextWithOriginal</span><span class=p>(</span><span class=kt>object</span> <span class=n>instance</span><span class=p>,</span> <span class=k>ref</span> <span class=kt>string</span> <span class=n>__result</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(!</span><span class=n>Settings</span><span class=p>.</span><span class=n>TextGetterCompatibilityMode</span> <span class=p>||</span> <span class=n>IsGettingText</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=kt>var</span> <span class=n>tti</span> <span class=p>=</span> <span class=n>instance</span><span class=p>.</span><span class=n>GetTextTranslationInfo</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>tti</span><span class=p>?.</span><span class=n>IsTranslated</span> <span class=p>==</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>var</span> <span class=n>originalAssembly</span> <span class=p>=</span> <span class=n>instance</span><span class=p>.</span><span class=n>GetType</span><span class=p>().</span><span class=n>Assembly</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=kt>var</span> <span class=n>withinGameCode</span> <span class=p>=</span> <span class=n>originalAssembly</span><span class=p>.</span><span class=n>IsAssemblyCsharp</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>withinGameCode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>         <span class=c1>// If the UI element is inside Assembly-CSharp it&#39;s not possible to tell if it&#39;s called by game code or UI code</span>
</span></span><span class=line><span class=cl>         <span class=c1>// This happens in NGUI, in which always replacing doesn&#39;t seem to cause any issues</span>
</span></span><span class=line><span class=cl>         <span class=n>__result</span> <span class=p>=</span> <span class=n>tti</span><span class=p>.</span><span class=n>OriginalText</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=k>else</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>         <span class=c1>// BUG: This seems to not be right, at least in the latest BepInEx5 there seems to be one less stack frame</span>
</span></span><span class=line><span class=cl>         <span class=c1>// 0. This method</span>
</span></span><span class=line><span class=cl>         <span class=c1>// 1. Postfix</span>
</span></span><span class=line><span class=cl>         <span class=c1>// 2. _Postfix</span>
</span></span><span class=line><span class=cl>         <span class=c1>// 3. Harmony-related trampoline method/MM_Detour</span>
</span></span><span class=line><span class=cl>         <span class=c1>// 4. Original method</span>
</span></span><span class=line><span class=cl>         <span class=kt>var</span> <span class=n>callingMethod</span> <span class=p>=</span> <span class=k>new</span> <span class=n>StackFrame</span><span class=p>(</span><span class=m>4</span><span class=p>).</span><span class=n>GetMethod</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>         <span class=kt>var</span> <span class=n>callingAssembly</span> <span class=p>=</span> <span class=n>callingMethod</span><span class=p>.</span><span class=n>DeclaringType</span><span class=p>?.</span><span class=n>Assembly</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>         <span class=k>if</span> <span class=p>(!</span><span class=n>originalAssembly</span><span class=p>.</span><span class=n>Equals</span><span class=p>(</span><span class=n>callingAssembly</span><span class=p>))</span>
</span></span><span class=line><span class=cl>         <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// if the assembly is not the same, it may be call from the game or another mod, so replace</span>
</span></span><span class=line><span class=cl>            <span class=n>__result</span> <span class=p>=</span> <span class=n>tti</span><span class=p>.</span><span class=n>OriginalText</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>然後在這裏處理替換成原本的文字，然後再將翻譯的文字傳回去。</p><h3 id=優點>優點</h3><p>優點基本繼承了靜態修改的優點，並且解決了靜態修改的缺點，因為這個方法是直接在遊戲運行的時候進行翻譯，沒有對遊戲資源進行修改，翻譯文字與原文字是隔開的，所以不需要擔心遊戲更新導致的資源包失效問題。基本上遊戲沒有大改變的情況下，漢化效果是依然存在的。(也解釋了為什麼有些漢化模組不會受到遊戲更新影響)</p><h3 id=缺點-3>缺點</h3><p>缺點基本上是靜態修改的缺點，並且技術難度以及deubg比起其他方法是最困難的，以下是一些Hook常見的問題：</p><ol><li><strong>Hook失敗</strong>：有些遊戲會對Hook進行檢測，這樣會導致Hook失敗。除此之外，在使用inine hook的時候，Hook的function如果長度不足夠，則會導致Hook失敗 (沒有足夠的長度去注入jump指令)</li><li><strong>時機問題</strong>：遊戲運行的時候會有很多Threadd在運行，在Proxy function的時候需要注意當前在哪一個Thread，那些Function可以使用及不可以 (Access Violation Problem)</li><li><strong>性能問題</strong>：Proxy Function如果內部執行如果過多指令，則會導致遊戲性能下降</li></ol><h2 id=總結>總結</h2><p>總括來說，本文介紹的四種遊戲漢化技術方法如下：</p><div class=table-wrapper><table><thead><tr><th>技術方法</th><th>技術門檻</th><th>優點</th><th>缺點</th></tr></thead><tbody><tr><td>OCR技術自動識別</td><td>低</td><td>即裝即用，操作簡便</td><td>識別準確度問題(e.g: 對特殊字體/藝術字的識別率低)</td></tr><tr><td>記憶體掃描提取</td><td>中</td><td>不受畫面品質影響</td><td>輸出位置需針對不同遊戲進行調整</td></tr><tr><td>靜態修改資源</td><td>高</td><td>翻譯效果最自然，完全融入遊戲界面，修改後無需持續運行翻譯程序</td><td>涉及遊戲檔案修改存在法律風險，遊戲更新會導致修改失效</td></tr><tr><td>動態Hook技術</td><td>高~極高</td><td>不直接修改遊戲檔案，對遊戲更新的適應性強</td><td>開發和維護成本最高，可能影響遊戲穩定性，靜態修改資源問題，Hook問題</td></tr></tbody></table></div><p>每種方法都有各自的好處和壞處以及最適合的使用場景，根據遊戲的特性和需求選擇從而產生不同的漢化方法的。</p><h3 id=延伸>延伸</h3><p>在這裡會簡單提及一些延伸的問題，這些問題是針對靜態修改和動態Hook的問題</p><ol><li><strong>字型問題</strong>：如果遊戲預設是沒有中文的，這意味著如果我們只是簡單地修改文字是不會有效果的(會出現亂碼的情況)，如果要顯示中文的話，則需要將中文字型包打進去遊戲裏面，而至於要怎樣將字型包打進去遊戲，就是另一個問題了。</li><li><strong>圖片問題</strong>：如果遊戲的文字是以圖片的形式顯示的話，基本上只是修改文字是沒有用的，這時候就需要將圖片的資源包提取出來，然後再進行修改，然後再將其封包回去遊戲裏面。遊戲的圖片運氣好的話可能會提供原生的圖片資源，這樣就可以直接修改圖片了，但如果沒有的話，通常都是被打包成以及壓縮了(例如<code>DXT</code>,<code>ETC</code>)，需要有額外的工作處理。</li><li><strong>翻譯語言格式問題</strong>：假如今天要將中文翻譯成英文，其中一個按鈕的字叫"成就"，這個字的長度是2個字元，但如果要翻譯成英文的話(achievement)，則需要11個字元，這樣原本的文字框不足夠顯示這個字的話，則需要將文字框的大小進行調整，這樣就需要對遊戲的UI進行修改了，對已經built的遊戲進行修改困難度是十分大的。</li></ol><p>除此之外非常建議可以閱讀一下這篇文章，這篇文章基本上講述了整個漢化的工作流程：</p><p><a class=link href=https://www.zhihu.com/question/46282905/answer/1087459979 target=_blank rel=noopener>游戏的汉化过程是怎样的？</a></p><h2 id=後話>後話</h2><p>這篇文章是我在學習遊戲漢化的過程中，對於遊戲漢化的一些技術方法的總結。當然科技會不斷進步，這些方法也會隨著時間而改變，這篇文章只是針對目前的技術方法進行總結。希望這篇文章能夠幫助到對遊戲漢化技術手段有興趣的人。</p><h2 id=參考資料>參考資料</h2><ul><li>Google Translate 圖片翻譯功能: <a class=link href=https://support.google.com/translate/answer/6142483 target=_blank rel=noopener>https://support.google.com/translate/answer/6142483</a></li><li>DeepL 翻譯器: <a class=link href=https://www.deepl.com/en/translator target=_blank rel=noopener>https://www.deepl.com/en/translator</a></li><li>維基百科 - OCR技術: <a class=link href=https://zh.wikipedia.org/zh-tw/ target=_blank rel=noopener>https://zh.wikipedia.org/zh-tw/</a>光學字符識別</li><li>MORT 開源項目: <a class=link href=https://github.com/killkimno/MORT target=_blank rel=noopener>https://github.com/killkimno/MORT</a></li><li>Cheat Engine 工具: <a class=link href=https://github.com/cheat-engine/cheat-engine target=_blank rel=noopener>https://github.com/cheat-engine/cheat-engine</a></li><li>TataruHelper 翻譯工具: <a class=link href=https://github.com/NightlyRevenger/TataruHelper target=_blank rel=noopener>https://github.com/NightlyRevenger/TataruHelper</a></li><li>Sharlayan 遊戲記憶體讀取工具: <a class=link href=https://github.com/FFXIVAPP/sharlayan target=_blank rel=noopener>https://github.com/FFXIVAPP/sharlayan</a></li><li>UABE 資源解包工具: <a class=link href=https://github.com/SeriousCache/UABE target=_blank rel=noopener>https://github.com/SeriousCache/UABE</a></li><li>BepInEx 模組框架: <a class=link href=https://github.com/BepInEx/BepInEx target=_blank rel=noopener>https://github.com/BepInEx/BepInEx</a></li><li>XUnity.AutoTranslator: <a class=link href=https://github.com/bbepis/XUnity.AutoTranslator target=_blank rel=noopener>https://github.com/bbepis/XUnity.AutoTranslator</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/%E9%81%8A%E6%88%B2%E6%BC%A2%E5%8C%96/>遊戲漢化</a>
<a href=/tags/game-translation/>Game Translation</a>
<a href=/tags/reverse-engineering/>Reverse Engineering</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><script src=https://giscus.app/client.js data-repo=OrangeEgg1937/orangeegg1937.github.io data-repo-id=R_kgDOOjbNNQ data-category=Announcements data-category-id=DIC_kwDOOjbNNc4Cpu-P data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"preferred_color_scheme":"preferred_color_scheme")}})()</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2025 Akua的IT狗Blog</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 建立<br>主題 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 設計</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>